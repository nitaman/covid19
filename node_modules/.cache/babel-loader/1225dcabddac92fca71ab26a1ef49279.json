{"ast":null,"code":"/*\n**************************************************\nGetCsvData (datePath)\n--------------------------------------------------\ndatePath: ターゲットファイル\n--------------------------------------------------\ncsvから取得した文字列データと最終更新日を取得\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/exports.GetCsvData=function(dataPath){var request=new XMLHttpRequest();request.open(\"GET\",dataPath,false);request.send(null);var myLastMod=new Date(request.getResponseHeader(\"last-modified\"));return[request.responseText,myLastMod];};/*\n**************************************************\nCsvToJson (csvStr, userOptions)\n--------------------------------------------------\ncsvStr: csvデータから取得した文字列\nuserOptions: header情報\n--------------------------------------------------\ncsvから取得したデータをもとにjsonデータを作成\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/exports.CsvToJson=function(csvStr,userOptions){if(typeof csvStr!=='string'){return null;};var options={header:0,columnName:[],ignoreBlankLine:true};if(userOptions){if(userOptions.header)options.header=userOptions.header;if(userOptions.columnName)options.columnName=userOptions.columnName;}var rows=csvStr.split('\\n');var json=[],line=[],row='',data={};var i,len,j,len2,x;for(i=0,len=rows.length;i<len;i++){if(rows[i].indexOf(',,,')!=-1){continue;}if(i+1<=options.header)continue;if(options.ignoreBlankLine&&rows[i]==='')continue;line=rows[i].split(',');if(options.columnName.length>0){/* 行を「,」で分解した要素が空だったらnullを入れる（要素が空だと動作しない？） */ /* 2021.09.06 ADD By Shingo Nita  */ /*\n      for (x=0; x<line.length; x++) {\n        if(!line[x]) {\n          row = null;\n          continue;\n        }       \n      }\n      */ /*\n      if(!line[0]) {\n        row = null;\n        continue;\n      }else {\n        if(!line[2]) {\n          row = null;\n          continue;\n        }\n      }\n      */data={};for(j=0,len2=options.columnName.length;j<len2;j++){if(typeof line[j]!=='undefined'){if(line[j]){row=line[j];row=row.replace(/^\"(.+)?\"$/,'$1');row=row.replace(/\\r/,'');row=row.replace(/\\n/,'');}else{row=0;}}else{row=null;}data[options.columnName[j]]=row;}json.unshift(data);}else{json.unshift(line);}}return json;};/*\n**************************************************\nCsvToCaption (csvStr, userOptions)\n--------------------------------------------------\ncsvStr: csvデータから取得した文字列\nuserOptions: header情報\n--------------------------------------------------\ncsvから取得したデータをもとにjsonデータを作成\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/exports.CsvToCaption=function(csvStr,userOptions){if(typeof csvStr!=='string'){return null;};var options={header:0,columnName:[],ignoreBlankLine:true};if(userOptions){if(userOptions.header)options.header=userOptions.header;if(userOptions.columnName)options.columnName=userOptions.columnName;}var rows=csvStr.split('\\n');var line=[];var caption=[];var i,len;for(i=0,len=rows.length;i<len;i++){if(rows[i].indexOf(',,,')!=-1){line=rows[i].split(',');if(line.length<9){if(line[0]){caption.unshift(line[0]);}}}else{continue;}}return caption;};/*\n**************************************************\nFormatDate (date, format)\n--------------------------------------------------\ndate: 日付オブジェクト\nformat: 書式フォーマット\n--------------------------------------------------\njsonから取得したdateをフォーマットを指定して変換する。\n--------------------------------------------------\n2021.09.01　作成　by shingo nita\n**************************************************\n*/exports.FormatDate=function(date,format){format=format.replace(/yyyy/g,date.getFullYear());format=format.replace(/MM/g,('0'+(date.getMonth()+1)).slice(-2));format=format.replace(/dd/g,('0'+date.getDate()).slice(-2));format=format.replace(/HH/g,('0'+date.getHours()).slice(-2));format=format.replace(/mm/g,('0'+date.getMinutes()).slice(-2));format=format.replace(/ss/g,('0'+date.getSeconds()).slice(-2));format=format.replace(/SSS/g,('00'+date.getMilliseconds()).slice(-3));return format;};// 例：2017年1月2日3時4分5秒6ミリ秒\n/*\nvar date = new Date(2017, 0, 2, 3, 4, 5, 6);\n\nconsole.log(FormatDate(date, 'yyyyMMdd')); // \"20170102\"\nconsole.log(FormatDate(date, 'yyyyMMddHHmmssSSS')); // \"20170102030405006\"\nconsole.log(FormatDate(date, 'yyyy/MM/dd')); // \"2017/01/02\"\nconsole.log(FormatDate(date, 'yyyy-MM-dd')); // \"2017-01-02\"\nconsole.log(FormatDate(date, 'HH:mm')); // \"03:04\"\nconsole.log(FormatDate(date, 'HH:mm:ss:SSS')); // \"03:04:05:006\"\n*/","map":{"version":3,"sources":["/Users/dailytohoku/AWS/react/covid/src/lib.js"],"names":["exports","GetCsvData","dataPath","request","XMLHttpRequest","open","send","myLastMod","Date","getResponseHeader","responseText","CsvToJson","csvStr","userOptions","options","header","columnName","ignoreBlankLine","rows","split","json","line","row","data","i","len","j","len2","x","length","indexOf","replace","unshift","CsvToCaption","caption","FormatDate","date","format","getFullYear","getMonth","slice","getDate","getHours","getMinutes","getSeconds","getMilliseconds"],"mappings":"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","sourcesContent":["/*\n**************************************************\nGetCsvData (datePath)\n--------------------------------------------------\ndatePath: ターゲットファイル\n--------------------------------------------------\ncsvから取得した文字列データと最終更新日を取得\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/\nexports.GetCsvData = (dataPath) => {\n  const request = new XMLHttpRequest();\n  request.open(\"GET\", dataPath, false);\n\trequest.send(null);\n  let myLastMod = new Date(request.getResponseHeader(\"last-modified\"));\n  return [request.responseText,myLastMod];\n};\n\n\n\n/*\n**************************************************\nCsvToJson (csvStr, userOptions)\n--------------------------------------------------\ncsvStr: csvデータから取得した文字列\nuserOptions: header情報\n--------------------------------------------------\ncsvから取得したデータをもとにjsonデータを作成\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/\nexports.CsvToJson = (csvStr, userOptions) => {\n  if (typeof csvStr !== 'string') {\n    return null\n  };\n  var options = { header : 0, columnName : [], ignoreBlankLine : true };\n  if (userOptions) {\n    if (userOptions.header) options.header = userOptions.header;\n    if (userOptions.columnName) options.columnName = userOptions.columnName;\n  }\n  var rows = csvStr.split('\\n');\n  var json = [], line = [], row = '', data = {};\n  var i, len, j, len2, x;\n  for (i = 0, len = rows.length; i < len; i++) {\n    if( rows[i].indexOf(',,,') != -1 ) {\n      continue;\n    }\n    if ((i + 1) <= options.header) continue;\n    if (options.ignoreBlankLine && rows[i] === '') continue;\n    line = rows[i].split(',');\n    if (options.columnName.length > 0) {\n\n      /* 行を「,」で分解した要素が空だったらnullを入れる（要素が空だと動作しない？） */\n      /* 2021.09.06 ADD By Shingo Nita  */\n      /*\n      for (x=0; x<line.length; x++) {\n        if(!line[x]) {\n          row = null;\n          continue;\n        }       \n      }\n      */\n      /*\n      if(!line[0]) {\n        row = null;\n        continue;\n      }else {\n        if(!line[2]) {\n          row = null;\n          continue;\n        }\n      }\n      */\n      data = {};\n      for (j = 0, len2 = options.columnName.length; j < len2; j++) {\n        if (typeof line[j] !== 'undefined') {\n          if ( line[j] ){\n            row = line[j];\n            row = row.replace(/^\"(.+)?\"$/, '$1');\n            row = row.replace(/\\r/, '');\n            row = row.replace(/\\n/, '');\n          } else {\n            row = 0;\n          }\n        } else {\n          row = null;\n        }\n        data[options.columnName[j]] = row;\n      }\n      json.unshift(data);\n    } else {\n      json.unshift(line);\n    }\n  }\n  return json;\n};\n\n\n\n/*\n**************************************************\nCsvToCaption (csvStr, userOptions)\n--------------------------------------------------\ncsvStr: csvデータから取得した文字列\nuserOptions: header情報\n--------------------------------------------------\ncsvから取得したデータをもとにjsonデータを作成\n--------------------------------------------------\n2021.09.02　作成　by shingo nita\n**************************************************\n*/\nexports.CsvToCaption = (csvStr, userOptions) => {\n  if (typeof csvStr !== 'string') {\n    return null\n  };\n  var options = { header : 0, columnName : [], ignoreBlankLine : true };\n  if (userOptions) {\n    if (userOptions.header) options.header = userOptions.header;\n    if (userOptions.columnName) options.columnName = userOptions.columnName;\n  }\n  var rows = csvStr.split('\\n');\n  var line = [];\n  var caption = [];\n  var i, len;\n  for (i = 0, len = rows.length; i < len; i++) {\n    if( rows[i].indexOf(',,,') != -1 ) {\n      line = rows[i].split(',');\n      if ( line.length < 9 ) {\n        if( line[0] ) {\n          caption.unshift(line[0]);\n        }\n      }\n    } else {\n      continue;\n    }\n  }\n  return caption;\n};\n\n\n\n/*\n**************************************************\nFormatDate (date, format)\n--------------------------------------------------\ndate: 日付オブジェクト\nformat: 書式フォーマット\n--------------------------------------------------\njsonから取得したdateをフォーマットを指定して変換する。\n--------------------------------------------------\n2021.09.01　作成　by shingo nita\n**************************************************\n*/\nexports.FormatDate = (date, format) => {\n  format = format.replace(/yyyy/g, date.getFullYear());\n  format = format.replace(/MM/g, ('0' + (date.getMonth() + 1)).slice(-2));\n  format = format.replace(/dd/g, ('0' + date.getDate()).slice(-2));\n  format = format.replace(/HH/g, ('0' + date.getHours()).slice(-2));\n  format = format.replace(/mm/g, ('0' + date.getMinutes()).slice(-2));\n  format = format.replace(/ss/g, ('0' + date.getSeconds()).slice(-2));\n  format = format.replace(/SSS/g, ('00' + date.getMilliseconds()).slice(-3));\n  return format;\n}\n\n// 例：2017年1月2日3時4分5秒6ミリ秒\n/*\nvar date = new Date(2017, 0, 2, 3, 4, 5, 6);\n\nconsole.log(FormatDate(date, 'yyyyMMdd')); // \"20170102\"\nconsole.log(FormatDate(date, 'yyyyMMddHHmmssSSS')); // \"20170102030405006\"\nconsole.log(FormatDate(date, 'yyyy/MM/dd')); // \"2017/01/02\"\nconsole.log(FormatDate(date, 'yyyy-MM-dd')); // \"2017-01-02\"\nconsole.log(FormatDate(date, 'HH:mm')); // \"03:04\"\nconsole.log(FormatDate(date, 'HH:mm:ss:SSS')); // \"03:04:05:006\"\n*/\n"]},"metadata":{},"sourceType":"module"}